<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>object</title>
</head>
<body>
    <h1>object</h1>
    <h2>객체생성 및 속성지정</h2>

    <input type="button" value="{}" onclick="test1();">
    <input type="button" value="new Object()" onclick="test2();">

    <script>

        // new 연산자를 사용해서 객체 생성

        function test2() {
            
            // 객체 생성
            var person = new Object();
            // 속성 추가
            person.name = '홍길동';
            person.age = 30;
            // person.family-name = '홍';  // 객체의 속성명으로 공백, 특수문자가 있다면,
                                        // 객체접근연산자(.)로는 접근 불가.
            person['family-name'] = '홍';   // 이렇게 접근 가능. ***
            
            
            // 속성 삭제
            // delete person.age;

            // getter
            console.log(person.name);       // 홍길동 (문자열)
            // 속성명을 반드시 문자열로 전달 (배열은 아님)
            console.log(person['name']);    // 홍길동 (문자열)

            console.log(person);
            console.log(product);   // 펑션블록은 엄격하다. (전역변수 있어도 안먹힘)
        
        }



        var product; // 전역변수

        // Object는 '속성:속성값'으로 이루어진 요소를 개수제한 없이 가질 수 있다.
        //  속성 : 문자열 또는 식별자 사용가능
        // 속성값 : 모든 자료형 가능

        function test1() {
            var product = {
                name : '말린 망고',
                amount : 10,
                ingredient : ['망고', '설탕'],
                recipe : {
                    duration : 5,
                    food : "망고 사라다"
                },
                eat : function() {
                    console.log("맛있습니다.");
                },
                "make-date" : new Date()        // 함수 안에서 선언시에
            }

            console.log(product);
            console.log(typeof product); // object

            console.log(product.ingredient[0]);
            console.log(product.ingredient[1]);
        
            console.log(product.recipe.food);
            console.log(product.eat);           // 펑션 내용 출력
            product.eat();                  // 함수 실행
        }
    </script>

    <h2>메소드</h2>
    <input type="button" value="실행" onclick="test3();">
    
    <script>

        // 함수중에 객체의 속성은 메소드라고 한다.
        function test3() {

            var dogName = '영삼이';

            var dog = {
                dogName : '복실이',
                eat : function(food) {                      // 메소드
                    console.log(this.dogName + "가 " + food + "를 냠냠 먹습니다.");
                }
            };

            // dogName 변수를 현재객체가 아닌 window 객체에서 찾기되고,
            // 기본적으로는 속성이 없으므로 ReferenceError 오류가 발생!
            // this를 달아줘야한다.
            // 객체안에서 this는 현재객체를 가리킨다. (여기서는 dog)
            dog.eat("닭갈비");
            (dog["eat"])("닭갈비");
        }
    </script>

    <h2>객체 속성 열람</h2>

    <input type="button" value="실행" onclick="test4();">

    <script>
        // 일반 for문이 아닌 for..in 문을 사용하면, 모든 속성을 열람할 수 있다.

        function test4() {
            var obj = {
                name : '홍길동',
                age : 30,
                married : true,
                say : function() {
                    console.log("안녕하세요~ " + this.name + "입니다.");
                }
            };

            // for..in문
            // 1. 배열 : 변수에 인덱스 전달
            // 2. 객체 : 변수에 속성명(key)가 전달
            for(var k in obj) {
                console.log(k + " = " + obj[k]);
                // obj[k]의 k에는 속성값이 문자열로 전달
            }
        }

    </script>


</body>
</html>